{"ast":null,"code":"import _regeneratorRuntime from\"C:/React/Chapter 3/music-player/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/React/Chapter 3/music-player/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/React/Chapter 3/music-player/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPlay,faAngleLeft,faAngleRight,faPause}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Player=function Player(_ref){var currentSong=_ref.currentSong,isPlaying=_ref.isPlaying,setIsPlaying=_ref.setIsPlaying,audioRef=_ref.audioRef,setSongInfo=_ref.setSongInfo,songInfo=_ref.songInfo,songs=_ref.songs,setCurrentSong=_ref.setCurrentSong,setSongs=_ref.setSongs;var activeLibraryHandler=function activeLibraryHandler(nextPrev){var newSongs=songs.map(function(song){if(song.id===nextPrev.id){return _objectSpread(_objectSpread({},song),{},{active:true});}else{return _objectSpread(_objectSpread({},song),{},{active:false});}});setSongs(newSongs);};//Event Handlers\nvar playSongHandler=function playSongHandler(){if(isPlaying){audioRef.current.pause();setIsPlaying(!isPlaying);}else{audioRef.current.play();setIsPlaying(!isPlaying);}};var getTime=function getTime(time){return Math.floor(time/60)+\":\"+(\"0\"+Math.floor(time%60)).slice(-2);};var dragHandler=function dragHandler(e){// console.log(e.target.value);\naudioRef.current.currentTime=e.target.value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:e.target.value}));};var skipTrackHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(direction){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});if(!(direction===\"skip-forward\")){_context.next=7;break;}_context.next=4;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 4:activeLibraryHandler(songs[(currentIndex+1)%songs.length]);_context.next=16;break;case 7:if(!((currentIndex-1)%songs.length===-1)){_context.next=13;break;}_context.next=10;return setCurrentSong(songs[songs.length-1]);case 10:activeLibraryHandler(songs[songs.length-1]);_context.next=16;break;case 13:_context.next=15;return setCurrentSong(songs[(currentIndex-1)%songs.length]);case 15:activeLibraryHandler(songs[(currentIndex-1)%songs.length]);case 16:if(isPlaying)audioRef.current.play();case 17:case\"end\":return _context.stop();}}},_callee);}));return function skipTrackHandler(_x){return _ref2.apply(this,arguments);};}();//Add the styles to the slider\nvar trackAnim={transform:\"translateX(\".concat(songInfo.animationPercentage,\"%)\")};return/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-control\",children:[/*#__PURE__*/_jsx(\"p\",{children:getTime(songInfo.currentTime)}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"linear-gradient(to right, \".concat(currentSong.color[0],\", \").concat(currentSong.color[1],\")\")},className:\"track\",children:[/*#__PURE__*/_jsx(\"input\",{min:0,max:songInfo.duration||0,value:songInfo.currentTime,onChange:dragHandler,type:\"range\"}),/*#__PURE__*/_jsx(\"div\",{style:trackAnim,className:\"animate-track\"})]}),/*#__PURE__*/_jsx(\"p\",{children:songInfo.duration?getTime(songInfo.duration):\"0:00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-control\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return skipTrackHandler(\"skip-back\");},className:\"skip-back\",size:\"2x\",icon:faAngleLeft}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:playSongHandler,className:\"play\",size:\"2x\",icon:isPlaying?faPause:faPlay}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return skipTrackHandler(\"skip-forward\");},className:\"skip-forward\",size:\"2x\",icon:faAngleRight})]})]});};export default Player;","map":{"version":3,"sources":["C:/React/Chapter 3/music-player/react-player/src/components/Player.js"],"names":["React","FontAwesomeIcon","faPlay","faAngleLeft","faAngleRight","faPause","Player","currentSong","isPlaying","setIsPlaying","audioRef","setSongInfo","songInfo","songs","setCurrentSong","setSongs","activeLibraryHandler","nextPrev","newSongs","map","song","id","active","playSongHandler","current","pause","play","getTime","time","Math","floor","slice","dragHandler","e","currentTime","target","value","skipTrackHandler","direction","currentIndex","findIndex","length","trackAnim","transform","animationPercentage","background","color","duration"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faPlay,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPause,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Player = ({\r\n  currentSong,\r\n  isPlaying,\r\n  setIsPlaying,\r\n  audioRef,\r\n  setSongInfo,\r\n  songInfo,\r\n  songs,\r\n  setCurrentSong,\r\n  setSongs,\r\n}) => {\r\n  const activeLibraryHandler = (nextPrev) => {\r\n    const newSongs = songs.map((song) => {\r\n      if (song.id === nextPrev.id) {\r\n        return {\r\n          ...song,\r\n          active: true,\r\n        };\r\n      } else {\r\n        return {\r\n          ...song,\r\n          active: false,\r\n        };\r\n      }\r\n    });\r\n    setSongs(newSongs);\r\n  };\r\n  //Event Handlers\r\n  const playSongHandler = () => {\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(!isPlaying);\r\n    } else {\r\n      audioRef.current.play();\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n\r\n  const getTime = (time) => {\r\n    return (\r\n      Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\r\n    );\r\n  };\r\n  const dragHandler = (e) => {\r\n    // console.log(e.target.value);\r\n    audioRef.current.currentTime = e.target.value;\r\n    setSongInfo({ ...songInfo, currentTime: e.target.value });\r\n  };\r\n  const skipTrackHandler = async (direction) => {\r\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\r\n    if (direction === \"skip-forward\") {\r\n      await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\r\n      activeLibraryHandler(songs[(currentIndex + 1) % songs.length]);\r\n    } else {\r\n      if ((currentIndex - 1) % songs.length === -1) {\r\n        await setCurrentSong(songs[songs.length - 1]);\r\n        activeLibraryHandler(songs[songs.length - 1]);\r\n      } else {\r\n        await setCurrentSong(songs[(currentIndex - 1) % songs.length]);\r\n        activeLibraryHandler(songs[(currentIndex - 1) % songs.length]);\r\n      }\r\n    }\r\n    if (isPlaying) audioRef.current.play();\r\n  };\r\n  //Add the styles to the slider\r\n  const trackAnim = {\r\n    transform: `translateX(${songInfo.animationPercentage}%)`,\r\n  };\r\n  return (\r\n    <div className=\"player\">\r\n      <div className=\"time-control\">\r\n        <p>{getTime(songInfo.currentTime)}</p>\r\n        <div\r\n          style={{\r\n            background: `linear-gradient(to right, ${currentSong.color[0]}, ${currentSong.color[1]})`,\r\n          }}\r\n          className=\"track\"\r\n        >\r\n          <input\r\n            min={0}\r\n            max={songInfo.duration || 0}\r\n            value={songInfo.currentTime}\r\n            onChange={dragHandler}\r\n            type=\"range\"\r\n          />\r\n          <div style={trackAnim} className=\"animate-track\"></div>\r\n        </div>\r\n        <p>{songInfo.duration ? getTime(songInfo.duration) : \"0:00\"}</p>\r\n      </div>\r\n      <div className=\"play-control\">\r\n        <FontAwesomeIcon\r\n          onClick={() => skipTrackHandler(\"skip-back\")}\r\n          className=\"skip-back\"\r\n          size=\"2x\"\r\n          icon={faAngleLeft}\r\n        />\r\n        <FontAwesomeIcon\r\n          onClick={playSongHandler}\r\n          className=\"play\"\r\n          size=\"2x\"\r\n          icon={isPlaying ? faPause : faPlay}\r\n        />\r\n        <FontAwesomeIcon\r\n          onClick={() => skipTrackHandler(\"skip-forward\")}\r\n          className=\"skip-forward\"\r\n          size=\"2x\"\r\n          icon={faAngleRight}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n"]},"metadata":{},"sourceType":"module"}